devtools::document()
library(sf)
station_location = read_excel(station_location_path) %>% st_as_sf(coords = c("long", "lat"), crs=4326)
# path to the file --------------------------------------------------------
station_location_path = "/mnt/CEPH_PROJECTS/Proslide/HourlyPrecData/List_RR_HourlySeries.xlsx"
# read the excel file
station_location = read_excel(station_location_path) %>% st_as_sf(coords = c("long", "lat"), crs=4326)
poly=station_location
voronoi = st_voronoi(poly)
plot(voronoi)
poly = st_transform(poly, crs=32632)
plot(poly)
voronoi = st_voronoi(poly)
plot(voronoi)
?st_voroni
?st_voronoi
voronoi = st_voronoi(poly, envelope = st_bbox(poly))
poly_combine = st_combine(poly)
poly_combine
st_voronoi(poly_combine)
v = st_voronoi(poly_combine)
plot(v)
plot(poly_combine)
v = st_collection_extract(v)
plot(v)
poly
mp = st_combine(poly)
v  = st_voronoi(mp)
v = st_collection_extract(v)
plot(v)
plot(st_centroid(poly), add=T, col="red")
make_voronoi = function(poly){
mp = st_combine(poly)
v  = st_voronoi(mp)
v = st_collection_extract(v)
centroids = st_centroid(poly)
return(c(v, centroids))
}
p = make_voronoi(poly)
make_voronoi = function(poly){
mp = st_combine(poly)
v  = st_voronoi(mp)
v = st_collection_extract(v)
centroids = st_centroid(poly)
return(v)
}
poly
make_voronoi(p)
make_voronoi(poly)
a = make_voronoi(poly)
plot(a)
make_voronoi = function(poly){
mp = st_combine(poly)
v  = st_voronoi(mp)
v = st_collection_extract(v)
centroids = st_centroid(poly)
r = list("voroni" = v, "centroids" = centroids)
return(r)
}
a = make_voronoi(poly)
a
class(a)
plot(a[[1]])
plot(a[[2]], add=T, col="green")
